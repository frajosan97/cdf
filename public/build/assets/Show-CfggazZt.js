import{r as C,j as e,H as _,L as N,a as f}from"./app-BHvGR4js.js";import{A,y as w,B as y}from"./AuthenticatedLayout-BzUGl44w.js";import{u as B,S as p}from"./sweetalert2.esm.all-CsTg8JN4.js";import{C as v,B as o}from"./Container-p98MeQ5k.js";import{R as a}from"./Row-C6NhzJ7b.js";import{C as i}from"./Col-DwigXgel.js";import{C as r}from"./Card-pGXOtwt2.js";import{T as l}from"./Table-OQRRGijP.js";import"./ApplicationLogo-hP5aVGpV.js";import"./createLucideIcon-DHdMkeD_.js";import"./Nav-DifuSH0a.js";import"./Fade-C5nPZceD.js";import"./CloseButton-DQ3VpcOX.js";import"./warning-CjFOLJzl.js";import"./InputGroupContext-CBrQ1b5Q.js";const K=({applicant:s})=>{const[n,c]=C.useState(!1),{showErrorToast:m}=B(),h=t=>{if(!t)return e.jsx(y,{bg:"secondary",children:"Pending"});const d={approved:"success",rejected:"danger",pending:"warning"};return e.jsx(y,{bg:d[t]||"secondary",className:"px-3 py-2",children:t.charAt(0).toUpperCase()+t.slice(1)})},g=t=>t?`KES ${parseFloat(t).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"-",x=t=>t?new Date(t).toLocaleString():"-",j=async()=>{try{if(!(await p.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)return;c(!0),(await f.delete(route("applicant.destroy",s.id))).data?.success&&(w.success("Applicant deleted successfully"),window.location.href=route("applicant.index"))}catch(t){m(t,"Failed to delete applicant")}finally{c(!1)}},u=async t=>{try{const{value:d}=await p.fire({title:`${t.charAt(0).toUpperCase()+t.slice(1)} Applicant`,text:`Are you sure you want to ${t} this applicant?`,input:"textarea",inputLabel:"Reason (optional)",inputPlaceholder:"Enter reason for decision...",showCancelButton:!0,confirmButtonColor:t==="approved"?"#28a745":"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:`Yes, ${t}`,cancelButtonText:"Cancel",inputValidator:b=>{if(b&&b.length>500)return"Reason must be less than 500 characters"}});if(d===void 0)return;c(!0),(await f.post(route("applicant.decision",s.id),{decision:t,decision_reason:d||null})).data?.success&&(w.success(`Applicant ${t} successfully`),window.location.reload())}catch(d){m(d,"Failed to update decision")}finally{c(!1)}};return e.jsxs(A,{children:[e.jsx(_,{title:`Applicant - ${s.admission_number}`}),e.jsxs(v,{fluid:!0,children:[e.jsxs(a,{className:"mb-4 align-items-center",children:[e.jsx(i,{children:e.jsx("div",{className:"d-flex align-items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"h2 mb-0 fw-bold",children:"Applicant Details"}),e.jsxs("p",{className:"text-muted mt-1 mb-0",children:[s.student_name," -"," ",s.admission_number]})]})})}),e.jsx(i,{xs:"auto",children:e.jsxs("div",{className:"d-flex gap-2",children:[s.decision==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{variant:"success",onClick:()=>u("approved"),disabled:n,children:[e.jsx("i",{className:"bi bi-check-lg me-2"}),"Approve"]}),e.jsxs(o,{variant:"danger",onClick:()=>u("rejected"),disabled:n,children:[e.jsx("i",{className:"bi bi-x-lg me-2"}),"Reject"]})]}),e.jsxs(N,{href:route("applicant.edit",s.id),className:"btn btn-primary",children:[e.jsx("i",{className:"bi bi-pencil me-2"}),"Edit"]}),e.jsxs(o,{variant:"danger",onClick:j,disabled:n,children:[e.jsx("i",{className:"bi bi-trash me-2"}),"Delete"]})]})})]}),e.jsx(a,{className:"mb-4",children:e.jsx(i,{children:e.jsx(r,{className:"border-0 shadow-sm bg-light",children:e.jsx(r.Body,{children:e.jsxs(a,{className:"align-items-center",children:[e.jsxs(i,{md:6,className:"d-flex align-items-center text-center text-md-start mb-3 mb-md-0",children:[e.jsx("div",{className:"display-1 text-primary",children:e.jsx("i",{className:"bi bi-person-badge"})}),e.jsxs("div",{className:"",children:[e.jsx("h4",{className:"m-0",children:s.student_name}),e.jsx("p",{className:"text-muted mb-0",children:s.admission_number}),h(s.decision)]})]}),e.jsxs(i,{md:6,className:"text-center text-md-end",children:[e.jsx("h5",{className:"text-muted mb-1",children:"Amount"}),e.jsx("h3",{className:"text-primary mb-0",children:g(s.amount)})]})]})})})})}),e.jsxs(a,{children:[e.jsxs(i,{lg:8,children:[e.jsxs(r,{className:"border-0 shadow-sm mb-4",children:[e.jsx(r.Header,{className:"bg-white py-3",children:e.jsxs("h5",{className:"mb-0 fw-bold",children:[e.jsx("i",{className:"bi bi-person-vcard me-2"}),"Personal Information"]})}),e.jsx(r.Body,{children:e.jsxs(a,{children:[e.jsx(i,{md:6,children:e.jsx(l,{borderless:!0,size:"sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"40%"},children:"Student Name:"}),e.jsx("td",{className:"fw-semibold",children:s.student_name||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"Ward:"}),e.jsx("td",{className:"fw-semibold",children:s.ward?.name||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"Location:"}),e.jsx("td",{className:"fw-semibold",children:s.location?.name||"-"})]})]})})}),e.jsx(i,{md:6,children:e.jsx(l,{borderless:!0,size:"sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"40%"},children:"Institution:"}),e.jsx("td",{className:"fw-semibold",children:s.institution?e.jsxs(e.Fragment,{children:[s.institution.name,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["Category:"," ",s.institution.category]})]}):"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"Admission Number:"}),e.jsx("td",{className:"fw-semibold",children:s.admission_number||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"Applicant Type:"}),e.jsx("td",{className:"fw-semibold",children:s.type?s.type.charAt(0).toUpperCase()+s.type.slice(1):"-"})]})]})})})]})})]}),e.jsxs(r,{className:"border-0 shadow-sm mb-4",children:[e.jsx(r.Header,{className:"bg-white py-3",children:e.jsxs("h5",{className:"mb-0 fw-bold",children:[e.jsx("i",{className:"bi bi-people me-2"}),"Parent/Guardian Information"]})}),e.jsx(r.Body,{children:e.jsxs(a,{children:[e.jsx(i,{md:6,children:e.jsx(l,{borderless:!0,size:"sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"40%"},children:"Status:"}),e.jsx("td",{className:"fw-semibold",children:s.parent_status?s.parent_status.charAt(0).toUpperCase()+s.parent_status.slice(1):"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"ID Number:"}),e.jsx("td",{className:"fw-semibold",children:s.parent_id_number||"-"})]})]})})}),e.jsx(i,{md:6,children:e.jsx(l,{borderless:!0,size:"sm",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"40%"},children:"Phone Number:"}),e.jsx("td",{className:"fw-semibold",children:e.jsx("a",{href:`tel:${s.parent_phone_number}`,className:"text-decoration-none",children:s.parent_phone_number||"-"})})]})})})})]})})]}),s.decision&&e.jsxs(r,{className:"border-0 shadow-sm mb-4",children:[e.jsx(r.Header,{className:"bg-white py-3",children:e.jsxs("h5",{className:"mb-0 fw-bold",children:[e.jsx("i",{className:"bi bi-check2-circle me-2"}),"Decision Information"]})}),e.jsx(r.Body,{children:e.jsxs(a,{children:[e.jsx(i,{md:6,children:e.jsx(l,{borderless:!0,size:"sm",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"40%"},children:"Decision:"}),e.jsx("td",{className:"fw-semibold",children:h(s.decision)})]})})})}),e.jsx(i,{md:6,children:s.decision_reason&&e.jsx(l,{borderless:!0,size:"sm",children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"40%"},children:"Reason:"}),e.jsx("td",{className:"fw-semibold",children:s.decision_reason})]})})})})]})})]})]}),e.jsxs(i,{lg:4,children:[e.jsxs(r,{className:"border-0 shadow-sm mb-4",children:[e.jsx(r.Header,{className:"bg-white py-3",children:e.jsxs("h6",{className:"mb-0 fw-bold",children:[e.jsx("i",{className:"bi bi-clock-history me-2"}),"Timestamps"]})}),e.jsx(r.Body,{children:e.jsx(l,{borderless:!0,size:"sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"Created:"}),e.jsx("td",{className:"fw-semibold",children:x(s.created_at)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:"Last Updated:"}),e.jsx("td",{className:"fw-semibold",children:x(s.updated_at)})]})]})})})]}),e.jsxs(r,{className:"border-0 shadow-sm bg-light",children:[e.jsx(r.Header,{className:"bg-white py-3",children:e.jsxs("h6",{className:"mb-0 fw-bold",children:[e.jsx("i",{className:"bi bi-lightning me-2"}),"Quick Actions"]})}),e.jsx(r.Body,{children:e.jsxs("div",{className:"d-grid gap-2",children:[e.jsxs(N,{href:route("applicant.edit",s.id),className:"btn btn-outline-primary",children:[e.jsx("i",{className:"bi bi-pencil me-2"}),"Edit Applicant"]}),e.jsxs(o,{variant:"outline-danger",onClick:j,disabled:n,children:[e.jsx("i",{className:"bi bi-trash me-2"}),"Delete Applicant"]})]})})]})]})]})]})]})};export{K as default};
